### 178. Ранжирование очков
Решено  
Средняя сложность

#### Задача:
Дана таблица `Scores`. Необходимо написать запрос, который найдет ранг для каждого очка (score). Ранжирование должно выполняться по следующим правилам:

1. Очки должны быть отсортированы от самого высокого до самого низкого.
2. Если два очка равны, они должны иметь одинаковый ранг.
3. После ничьей (одинаковых очков) следующий ранг должен быть следующим целым числом. Другими словами, между рангами не должно быть пропусков.

Верните результат в порядке убывания очков.

---

#### Структура таблицы:

**Таблица Scores:**

| Column Name | Type    |
|-------------|---------|
| id          | int     |
| score       | decimal |

- `id` — первичный ключ (уникальное значение) для этой таблицы.
- Каждая строка таблицы содержит очки игры. Очки представлены десятичным значением с двумя знаками после запятой.

---

#### Пример:

**Ввод:**

Таблица `Scores`:

| id | score |
|----|-------|
| 1  | 3.50  |
| 2  | 3.65  |
| 3  | 4.00  |
| 4  | 3.85  |
| 5  | 4.00  |
| 6  | 3.65  |

**Вывод:**

| score | rank |
|-------|------|
| 4.00  | 1    |
| 4.00  | 1    |
| 3.85  | 2    |
| 3.65  | 3    |
| 3.65  | 3    |
| 3.50  | 4    |

**Объяснение:**
- Очки `4.00` имеют самый высокий ранг — `1`.
- Очки `3.85` идут следующими, их ранг — `2`.
- Очки `3.65` разделяют третий ранг.
- Очки `3.50` имеют четвертый ранг.

---

#### Решение (SQL):

Для решения задачи можно использовать оконную функцию `DENSE_RANK()`, которая присваивает одинаковые ранги одинаковым значениям и не создает "пропусков" между рангами.

```sql
SELECT 
    score,
    DENSE_RANK() OVER (ORDER BY score DESC) AS `rank`
FROM 
    Scores
ORDER BY 
    score DESC;
```

---

#### Пояснение к запросу:
1. **DENSE_RANK()**:
    - Функция `DENSE_RANK()` используется для ранжирования строк. Она присваивает одинаковый ранг одинаковым значениям и увеличивает ранг только на единицу после группы одинаковых значений.
    - `ORDER BY score DESC`: Сортируем очки по убыванию, чтобы самые высокие очки получили меньший ранг.
2. **SELECT**:
    - Выбираем столбцы `score` и ранг (`rank`), который вычисляется с помощью `DENSE_RANK()`.
3. **ORDER BY**:
    - Результат сортируется по убыванию очков, чтобы соответствовать требованиям задачи.

---

#### Результат:
Запрос вернет таблицу с двумя колонками: `score` и `rank`. Очки будут отсортированы по убыванию, а ранги будут присвоены в соответствии с указанными правилами.

---

#### Примечание:
- Функция `DENSE_RANK()` отличается от `RANK()` тем, что она не создает "дыр" в рангах. Например, если два значения имеют ранг `1`, следующее значение получит ранг `2` (в случае `DENSE_RANK()`), а не `3` (в случае `RANK()`).